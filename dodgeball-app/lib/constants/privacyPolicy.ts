/**
 * 개인정보 처리방침 상수
 * Baseball-Firebase 버전을 기반으로 DodgeballHub에 맞게 수정
 */

import type {
  PrivacyPolicySection,
  ConsentItem,
  ServiceOperator,
} from '@/types/privacy';

/**
 * 개인정보 처리방침 버전
 */
export const PRIVACY_POLICY_VERSION = 'v1.0';

/**
 * 최종 업데이트 날짜
 */
export const LAST_UPDATED = '2025년 1월 23일';

/**
 * 서비스 운영자 정보
 */
export const SERVICE_OPERATOR: ServiceOperator = {
  serviceName: 'DodgeballHub (피구 경기 관리 시스템)',
  name: '이원근',
  email: 'zoomwk432@gmail.com',
  school: '초등학교',
};

/**
 * 개인정보 처리방침 요약
 */
export const PRIVACY_POLICY_SUMMARY = `본 서비스는 체육 수업 운영을 위해 최소한의 개인정보를 수집합니다.
수집된 정보는 교육 목적으로만 사용되며, 회원 탈퇴 시 즉시 삭제됩니다.
만 14세 미만 학생의 경우 법정대리인 동의가 필요합니다.`;

/**
 * 개인정보 처리방침 섹션들
 */
export const PRIVACY_POLICY_SECTIONS: PrivacyPolicySection[] = [
  {
    id: 'purpose',
    title: '1. 개인정보의 수집 및 이용 목적',
    content: `DodgeballHub(이하 "서비스")은 다음의 목적을 위하여 개인정보를 처리합니다.

가. 교사 회원 관리
   • 로그인 인증 및 회원 식별
   • 학급 및 팀 관리 기능 제공
   • 피구 경기 운영 및 기록 관리
   • 서비스 이용에 관한 안내 및 문의 응대

나. 학생 기록 관리
   • 체육 활동 기록 저장 및 조회
   • 개인별 피구 통계 및 성과 관리
   • 배지(상장) 시스템 운영
   • 학급 내 랭킹 및 성취도 관리

다. 서비스 개선
   • 통계 및 데이터 분석을 통한 서비스 개선
   • 신규 서비스 개발 및 맞춤형 서비스 제공`,
  },
  {
    id: 'items',
    title: '2. 수집하는 개인정보의 항목',
    content: `서비스는 다음과 같은 개인정보를 수집합니다.

가. 교사 (Google 로그인)
   • 필수 항목: 이메일 주소, Google 고유 식별자(UID), 이름, 프로필 사진
   • 자동 수집 항목: 로그인 일시, IP 주소, 브라우저 정보(User Agent)

나. 학생 (접근 코드 입력)
   • 필수 항목: 이름, 학년, 반, 출석번호, 학생 코드
   • 활동 기록: 경기 참여 기록, 서바이벌 횟수, 아웃 횟수, 패스 횟수, 배지 획득 내역
   • 자동 수집 항목: 접근 일시

다. 법정대리인 정보 (만 14세 미만 학생, 선택)
   • 선택 항목: 법정대리인 이름, 연락처 (교사가 동의 확인용으로 입력)`,
  },
  {
    id: 'retention',
    title: '3. 개인정보의 보유 및 이용 기간',
    content: `서비스는 개인정보 수집 및 이용 목적이 달성된 후에는 해당 정보를 지체 없이 파기합니다.

가. 교사 정보
   • 보유 기간: 회원 탈퇴 시까지
   • 탈퇴 요청 즉시 모든 개인정보 및 관련 데이터 삭제
   • 법령에 따라 보존이 필요한 경우 예외적으로 일정 기간 보관

나. 학생 정보
   • 보유 기간: 교사가 학생 정보 삭제 시까지
   • 학급 삭제 시 해당 학급의 모든 학생 정보 삭제
   • 교사 탈퇴 시 소속 학급의 모든 학생 정보 자동 삭제

다. 법령에 따른 보관
   • 전자상거래 등에서의 소비자 보호에 관한 법률
     - 계약 또는 청약철회 등에 관한 기록: 5년
     - 대금결제 및 재화 등의 공급에 관한 기록: 5년
     - 소비자의 불만 또는 분쟁처리에 관한 기록: 3년
   • 통신비밀보호법
     - 로그인 기록: 3개월`,
  },
  {
    id: 'third-party',
    title: '4. 개인정보의 제3자 제공',
    content: `서비스는 원칙적으로 이용자의 개인정보를 제3자에게 제공하지 않습니다.

다만, 다음의 경우에는 예외로 합니다:
   • 이용자가 사전에 동의한 경우
   • 법령의 규정에 의거하거나 수사 목적으로 법령에 정해진 절차와 방법에 따라 수사기관의 요구가 있는 경우
   • 통계작성, 학술연구 또는 시장조사를 위하여 필요한 경우로서 특정 개인을 알아볼 수 없는 형태로 제공하는 경우

※ 본 서비스는 교육용 웹 애플리케이션으로, 외부 광고나 마케팅 목적으로 개인정보를 제공하지 않습니다.`,
  },
  {
    id: 'consignment',
    title: '5. 개인정보 처리 위탁',
    content: `서비스는 원활한 서비스 제공을 위해 다음과 같이 개인정보 처리 업무를 외부 업체에 위탁하고 있습니다.

가. 위탁받는 자: Google LLC
   • 위탁 업무 내용
     - Firebase 서비스를 통한 데이터 저장 및 관리
     - Google 계정을 통한 로그인 인증 처리
   • 개인정보의 보유 및 이용 기간: 회원 탈퇴 시 또는 위탁 계약 종료 시까지

나. 위탁받는 자: Vercel Inc. (배포 및 호스팅)
   • 위탁 업무 내용
     - 웹 애플리케이션 호스팅 및 배포
     - 서버리스 함수 실행 환경 제공
   • 개인정보의 보유 및 이용 기간: 서비스 종료 시까지

※ 위탁 업무의 내용이나 수탁자가 변경될 경우, 지체 없이 본 개인정보 처리방침을 통하여 공개하겠습니다.`,
  },
  {
    id: 'rights',
    title: '6. 정보주체의 권리·의무 및 행사방법',
    content: `이용자는 개인정보주체로서 다음과 같은 권리를 행사할 수 있습니다.

가. 개인정보 열람 요구
   • 서비스 내 '설정' 메뉴에서 본인의 정보를 직접 열람할 수 있습니다.

나. 개인정보 정정·삭제 요구
   • 잘못된 정보가 있을 경우 정정을 요청할 수 있습니다.
   • 회원 탈퇴를 통해 모든 개인정보 삭제가 가능합니다.

다. 개인정보 처리 정지 요구
   • 개인정보의 처리 정지를 요구할 수 있습니다.
   • 다만, 법률에 특별한 규정이 있거나 법령상 의무를 준수하기 위하여 불가피한 경우 처리 정지 요구를 거부할 수 있습니다.

라. 권리 행사 방법
   • 서비스 내 기능을 통한 직접 행사
   • 운영자 이메일(${SERVICE_OPERATOR.email})을 통한 요청
   • 요청 시 본인 확인 절차를 거칩니다.`,
  },
  {
    id: 'security',
    title: '7. 개인정보의 안전성 확보 조치',
    content: `서비스는 개인정보의 안전성 확보를 위해 다음과 같은 조치를 취하고 있습니다.

가. 관리적 조치
   • 내부관리계획 수립 및 시행
   • 개인정보 접근 권한 최소화 (교사는 본인 데이터만 접근 가능)
   • 정기적인 보안 점검 및 개선

나. 기술적 조치
   • HTTPS 프로토콜을 통한 암호화 통신
   • Firebase Firestore Security Rules를 통한 데이터 접근 제어
   • Google OAuth 2.0을 통한 안전한 로그인 인증
   • 정기적인 보안 업데이트 및 패치 적용

다. 물리적 조치
   • Firebase Cloud 서비스의 물리적 보안 시스템 활용
   • 데이터 백업 및 복구 시스템 구축

라. 데이터 최소화
   • 필요 최소한의 개인정보만 수집
   • IP 주소 등 민감 정보는 수집하지 않음`,
  },
  {
    id: 'cookies',
    title: '8. 개인정보 자동 수집 장치의 설치·운영 및 거부에 관한 사항',
    content: `가. 쿠키(Cookie) 사용
서비스는 전통적인 쿠키를 사용하지 않으며, 다음의 방법으로 인증 상태를 유지합니다:
   • NextAuth.js의 JWT(JSON Web Token) 기반 세션 관리
   • HttpOnly 쿠키를 통한 안전한 토큰 저장

나. 로컬 스토리지(Local Storage) 사용
다음의 정보를 브라우저 로컬 스토리지에 저장합니다:
   • 사용자 설정값 (언어, 테마 등)
   • 임시 데이터 (새로고침 시 입력값 유지 등)

다. 거부 방법
   • 브라우저 설정을 통해 쿠키 저장을 거부할 수 있습니다.
   • 단, 쿠키 저장을 거부할 경우 서비스 이용에 제한이 있을 수 있습니다.

라. 개인정보를 자동으로 수집하지 않음
   • IP 주소, MAC 주소 등의 개인 식별 정보는 자동으로 수집하지 않습니다.`,
  },
  {
    id: 'manager',
    title: '9. 개인정보 보호책임자',
    content: `서비스는 개인정보 처리에 관한 업무를 총괄해서 책임지고, 개인정보 처리와 관련한 정보주체의 불만처리 및 피해구제를 위하여 아래와 같이 개인정보 보호책임자를 지정하고 있습니다.

▶ 개인정보 보호책임자
   • 성명: ${SERVICE_OPERATOR.name}
   • 소속: ${SERVICE_OPERATOR.school}
   • 이메일: ${SERVICE_OPERATOR.email}

※ 개인정보 침해에 대한 신고나 상담이 필요하신 경우에는 아래 기관에 문의하시기 바랍니다.

   • 개인정보침해신고센터 (https://privacy.kisa.or.kr / 국번없이 118)
   • 대검찰청 사이버수사과 (https://www.spo.go.kr / 국번없이 1301)
   • 경찰청 사이버안전국 (https://cyberbureau.police.go.kr / 국번없이 182)`,
  },
  {
    id: 'children',
    title: '10. 만 14세 미만 아동의 개인정보 보호',
    content: `서비스는 만 14세 미만 아동의 개인정보를 수집할 때 법정대리인의 동의를 받습니다.

가. 법정대리인 동의 획득
   • 교사는 학생 정보를 등록하기 전에 법정대리인(부모 또는 보호자)의 동의를 받아야 합니다.
   • 법정대리인은 아동의 개인정보에 대한 열람, 정정, 삭제를 요구할 수 있습니다.

나. 법정대리인의 권리
   • 언제든지 법정대리인의 동의를 철회할 수 있습니다.
   • 아동의 개인정보 열람, 정정, 삭제를 요구할 수 있습니다.
   • 교사 또는 운영자에게 직접 연락하여 권리를 행사할 수 있습니다.

다. 교사의 책임
   • 교사는 학생의 개인정보를 등록하기 전에 법정대리인의 동의를 반드시 받아야 합니다.
   • 동의 없이 수집한 정보는 즉시 삭제해야 합니다.

※ 본 서비스는 학교 수업 목적으로 교사가 학생 정보를 관리하는 시스템입니다. 교사는 법정대리인(학부모)의 사전 동의를 받은 후 학생 정보를 등록해야 합니다.`,
  },
  {
    id: 'changes',
    title: '11. 개인정보 처리방침의 변경',
    content: `이 개인정보 처리방침은 시행일로부터 적용되며, 법령 및 방침에 따른 변경내용의 추가, 삭제 및 정정이 있는 경우에는 변경사항의 시행 7일 전부터 공지사항을 통하여 고지할 것입니다.

다만, 개인정보의 수집 및 활용, 제3자 제공 등과 같이 이용자 권리의 중요한 변경이 있을 경우에는 최소 30일 전에 고지합니다.

▶ 현재 버전: ${PRIVACY_POLICY_VERSION}
▶ 시행일자: ${LAST_UPDATED}
▶ 이전 버전 보기: 해당사항 없음 (최초 버전)`,
  },
];

/**
 * 필수 동의 항목
 */
export const REQUIRED_CONSENTS: ConsentItem[] = [
  {
    id: 'terms',
    label: '서비스 이용약관에 동의합니다',
    required: true,
  },
  {
    id: 'privacy',
    label: '개인정보 수집 및 이용에 동의합니다',
    required: true,
  },
];

/**
 * 선택 동의 항목
 */
export const OPTIONAL_CONSENTS: ConsentItem[] = [
  // 현재 선택 동의 항목 없음
  // 향후 마케팅 정보 수신 등을 추가할 수 있음
];
